---
- name: Install OpenStates.org
  hosts: openstates
  user: ubuntu
  sudo: yes
  roles:
      - role: common-roles/common
        hostname: openstates
        extra_packages:
          - libpq-dev
          - libxslt-dev
      - role: common-roles/ebs
        device_letter: f
        volume_size: 10
        ebs_path: /projects/openstates/
        when: use_ebs == True
      - role: common-roles/django
        project_name: openstates
        git_repositories:
            - dir: site
              repo: "git://github.com/sunlightlabs/openstates.org.git"
            - dir: billy
              repo: "git://github.com/sunlightlabs/billy.git"
        wsgi_module: openstates.wsgi:application
        python_version: 2
      - role: openstates
        project_name: openstates
